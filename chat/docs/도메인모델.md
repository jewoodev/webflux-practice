# 메신저(채팅) 서버 도메인
- 채팅은 E-commerce 서비스를 사용하는 회원이 사용할 수 있는 온라인 서비스이다.
  - 회원이 되기 전에는 (채팅 서버의 서비스 중에서) '회원가입'과 '로그인' 서비스만 사용할 수 있다.
  - 회원은 가입 후 활성 상태가 되어야 메신저 서비스를 제공받을 수 있다. 
- 회원은 가입할 때 '판매자'와 '구매자' 중 하나의 역할을 선택할 수 있다.
  - 하나의 회원 계정은 하나의 역할만 가질 수 있다.
- 회원은 자신이 구매한 상품의 판매자와 대화할 수 있는 채팅방에 초대된다.
  - 이 채팅방은 상품 구매와 동시에 생성된다.
- 채팅방은 '주문이 발생할 때' 마다 판매자와 구매자가 참여자로 설정하여 생성된다.
- 채팅방은 접근 권한을 제한하는 역할을 수행하고, 마지막 발행 정보를 알고 있다. 따라서 다음의 정보를 알고 있다.
  - 참여 중인 회원이 누구인지
  - 마지막 메세지 발행자는 누구인지
  - 마지막 메세지 내용이 무엇인지
- 회원은 자신이 참여 중인 각각의 채팅방의 정보들을 알 수 있다.
  - 각 채팅이 발행될 때마다 해당 채팅방이 갖는 정보들은 갱신된다.
- 회원은 자신이 아직 읽지 않은 메세지에 대해 알림을 받을 수 있다.
- 회원은 자신이 참여 중이지 않은 채팅방에 접근할 수 없고, 정보 또한 조회할 수 없다.
- 채팅 메세지는 삭제될 수 없다.
- '판매자' 회원은 외국인과 소통하는 채팅의 경우에 번역 기능을 제공받을 수 있다.
  - 번역 기능을 제공받을 때 외국어로 작성된 채팅 원본과 번역본 모두가 조회할 수 있다.
- 구매자의 각 채팅은 감정분석 API로 분석되고, 그 점수는 그들에게 서비스하는 판매자의 감정 점수에 반영된다.


# 도메인 모델

## 채팅


## 회원(User)
_Entity_
### 속성
- `email`: 이메일 
- `username`: 고유한 이름
- `passwordHash`: 비밀번호
- `role`: 역할 (판매자, 구매자)
- `status`: 상태(대기중, 활성, 비활성)
### 행위
- `constructor()`: 회원 생성: email, username, passwordHash, role
### 규칙
- `activate()`: 회원 상태를 활성 상태로 전환한다.


## 채팅방




