## 성능 개선 관련

- **MongoDB 설계**
    - 각 서버마다 DB 인스턴스를 두어 부하를 분산하기 위해 샤딩에 대해 공부 필요
- **메시지 브로커** (Kafka vs Redis Pub/Sub vs RabbitMQ)
    - “누가 누구한테 메시지를 보냈는지” 를 저장/전달할 때 유실 없이 처리하려면 필요 
    - Kafka는 내구성, Redis는 빠름 (단 클러스터 구성 고려)


## 유지보수 관련 필수 작업

- **모니터링**
    - 세션 상태나 메시지 전파 상태를 모니터링하는 메커니즘 필요
    - Redis의 상태나 세션 수, 메시지 처리량 등을 모니터링할 수 있는 기능을 추가
- **메모리 누수 방지**
    - 필요성: 장기 실행 시 메모리 누수 가능성
    - 문제점:
        - 비활성 세션의 메모리 점유
        - 리소스 낭비
    - 해결방안:
        - 주기적인 세션 정리
        - 비활성 세션 자동 제거
    - 결과: 안정적인 메모리 사용 및 서버 성능 유지
- **메트릭 수집**
    - 필요성: 시스템 상태 모니터링
    - 문제점:
        - 성능 문제 조기 발견 어려움
        - 용량 계획 수립 어려움
    - 해결방안:
        - Prometheus 등의 도구로 메트릭 수집
- **대시보드 구축**
    - 필요성: 성능 모니터링 및 예측 가능한 확장
    - 문제점:
        - 악의적 공격 방지
        - 무단 접근 가능성
        - 데이터 유출 위험
    - 해결방안:
        - 세션 검증
        - 보안 정책 적용
    - 결과: 안전한 서비스 운영
- **연결 풀 관리**
    - 필요성: 연결 생성/해제 비용 최적화
    - 문제점:
        - 빈번한 연결 생성/해제로 인한 성능 저하
        - 리소스 낭비
    - 해결방안:
        - 연결 풀링 구현
        - 연결 재사용
    - 결과: 성능 최적화 및 리소스 효율성 향상
- **세션 상태 관리**
    - 필요성: 사용자의 온라인/오프라인 상태 추적
    - 문제점:
        - 연결 상태 정보 손실 가능성
        - 서버 재시작 시 상태 정보 유실
    - 해결방안:
        - Redis에 세션 상태 저장
        - TTL 설정으로 자동 정리
    - 결과: 상태 정보 지속성 확보 및 메모리 관리 용이


## 에러 대응책

- **에러 발생 알림**
    - 필요성: 문제 발생 시 즉시 조치 필요
    - 문제점:
        - 에러 발생 시 즉시 알림 필요
        - 문제 원인 파악 어려움
    - 해결방안:
        - 오류 발생 시 알림 시스템 구축
- **에러 처리 및 로깅**
    - 필요성: 문제 발생 시 원인 파악 및 대응
    - 문제점:
        - 에러 추적 어려움
        - 문제 재현 불가능
    - 해결방안:
        - 체계적인 에러 로깅
        - 메트릭 수집
    - 결과: 문제 신속한 해결 및 시스템 안정성 향상


## 클라이언트 개발이 들어가면 시작할 수 있는 계획들

- **하트비트(Heartbeat) 구현**(세션 복구 메커니즘) -> 클라이언트 개발이 이루어져야 테스트가 용이할 것 같아 미룸
    - 필요성: 클라이언트의 실제 연결 상태 파악 필요, 현재는 WebSocket 연결이 끊어지면 세션이 완전히 제거된다.
    - 문제점: 
        - 클라이언트가 비정상 종료 시 서버에서 연결 감지 불가
        - 죽은 연결이 계속 리소스 점유
    - 해결방안:
        - 주기적인 ping/pong 메시지 교환
        - 응답 없을 시 연결 종료
    - 결과: 리소스 낭비 방지 및 연결 상태 정확한 관리
